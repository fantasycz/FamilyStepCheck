<view class="container">
  
  <view class="gold-banner">
    <view class="gold-header">
      <text class="gold-title">DeepSeek 每日金句</text>

      <view class="gold-like-btn {{goldIsLiked ? 'active' : ''}}" bindtap="handleLikeGold">
        <text class="icon">{{goldIsLiked ? '❤️' : '🤍'}}</text>
        <text class="count">{{goldLikeCount || 0}}</text>
      </view>
    </view>

    <view class="gold-content">
      <text class="gold-text">{{dailyGold || '每一步，都是在重新定义自己。'}}</text>
    </view>
  </view>

  <view class="login-wrapper" wx:if="{{!hasUserInfo}}">
    <view class="welcome-text">欢迎来到步数打卡</view>
    <view class="login-card">
      <view class="login-tips">请设置您的打卡个人信息</view>
      
      <button class="avatar-wrapper" open-type="chooseAvatar" bindchooseavatar="onChooseAvatar">
        <image class="avatar-preview" src="{{tempAvatar || 'https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0'}}"></image>
        <view class="edit-text">点击选择头像</view>
      </button> 

      <view class="nickname-item">
        <text class="label">昵称</text>
        <input type="nickname" class="nickname-input" placeholder="点击获取或手动输入" bindblur="onInputNickname" />
      </view>
      
      <button class="login-btn" type="primary" bindtap="confirmLogin">确认登录</button>
    </view>
  </view>

  <view class="checkin-form" wx:else>
    <view class="card">
      <view class="title">今日打卡</view>
      
      <view class="item">
        <text class="label">今日步数</text>
        <input class="input-field" type="number" placeholder="请输入步数" bindinput="onStepInput" value="{{steps}}" />
      </view>

      <view class="item">
        <text class="label">今日感想</text>
        <textarea class="textarea-field" placeholder="写下今天的运动心情..." bindinput="onMoodInput" value="{{mood}}"></textarea>
      </view>

      <view class="item">
        <text class="label">上传美照</text>
        <view class="upload-area" bindtap="chooseImage">
          <image wx:if="{{tempImgPath}}" src="{{tempImgPath}}" mode="aspectFill" class="preview-img"></image>
          <view wx:else class="plus-icon">+</view>
        </view>
      </view>

      <button class="submit-btn" type="primary" bindtap="submitData" loading="{{loading}}">立即提交</button>
    </view>
  </view>
</view>